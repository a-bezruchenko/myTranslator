<!DOCTYPE html> <!-- html 5 -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>New document</title>
    <script src="onStart.js"></script>
    <script src="utilitary.js"></script>
    <script src="tree.js"></script>
    <script src="lexer.js"></script>
    <script src="parser.js"></script>
    <script src="getData.js"></script>
</head>
<body>
    <pre><code class="language-js">
        MODULE Example;
        VAR 	i:INTEGER;
        ch:CHAR;
            PROCEDURE Sqr(n:INTEGER ):INTEGER
        VAR temp, acc:INTEGER;
            BEGIN
                temp := n;
                acc := 0;
                WHILE temp>0 DO
                    acc:= acc + n;
                    DEC temp;
                END;
            END Sqr;
        BEGIN
            i := 1;
            1+5;
            1;
            ;
            i := i;
            i := Sqr(i);
            i := Sqr(Sqr(i));
            Sqr(Sqr(i), 3, puk()) - Sqr(Sqr(i));
            i:=Sqr(Sqr(i), i);
        END Example.
    </code></pre>
    <a href=#>Скачать svg-файл</a>
    <p>
        <input class="button" type="button" value="Перерисовать дерево" onclick="run();">
        <b  class="green" id="run_out2_id" style="float:right; margin-right:1em; margin-top:-1em;"></b><br>
        <center>
            <div id="run_out_id" ></div>
            
            <script>
                document.getElementsByTagName('a')[0].onclick = function() {
                    var text = document.getElementById('run_out_id').innerHTML;
                    var csvData = 'data:application/txt;charset=utf-8,' + encodeURIComponent(text);
                    this.href = csvData;
                    this.target = '_blank';
                    this.download = 'tree.svg';
                }
                run();
                function run()
                {
                    var test = "main(object(thing,being(creature(animal,bird,fish,insect),plant),part,group,stuff,space),concept(action,time,attr,mental,sound";
                    
                    var tr = getStringTree(parser(lexer(document.querySelector('code.language-js'),"lex_table.json")[0],"productionsTable.json", false))
                    drawTree(tr);

                    function drawTree(t)
                    {
                        document.getElementById('run_out_id').innerHTML = rewriteDiagonalLines(Tree.getSVG(Tree.parse(t)));
                    }

                }
            </script>
        </center>
    </p>
    

</body>
</html>